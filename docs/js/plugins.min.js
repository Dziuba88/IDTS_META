"function"!=typeof Object.create&&(Object.create=function(obj){function F(){}return F.prototype=obj,new F}),function($,window,document,undefined){"use strict";var SinglePageNav={init:function(options,container){this.options=$.extend({},$.fn.singlePageNav.defaults,options),this.container=container,this.$container=$(container),this.$links=this.$container.find("a"),""!==this.options.filter&&(this.$links=this.$links.filter(this.options.filter)),this.$window=$(window),this.$htmlbody=$("html, body"),this.$links.on("click.singlePageNav",$.proxy(this.handleClick,this)),this.didScroll=!1,this.checkPosition(),this.setTimer()},handleClick:function(e){var self=this,link=e.currentTarget,$elem=$(link.hash);e.preventDefault(),$elem.length&&(self.clearTimer(),"function"==typeof self.options.beforeStart&&self.options.beforeStart(),self.setActiveLink(link.hash),self.scrollTo($elem,function(){self.options.updateHash&&history.pushState&&history.pushState(null,null,link.hash),self.setTimer(),"function"==typeof self.options.onComplete&&self.options.onComplete()}))},scrollTo:function($elem,callback){var target=this.getCoords($elem).top,called=!1;this.$htmlbody.stop().animate({scrollTop:target},{duration:this.options.speed,easing:this.options.easing,complete:function(){"function"!=typeof callback||called||callback(),called=!0}})},setTimer:function(){var self=this;self.$window.on("scroll.singlePageNav",function(){self.didScroll=!0}),self.timer=setInterval(function(){self.didScroll&&(self.didScroll=!1,self.checkPosition())},250)},clearTimer:function(){clearInterval(this.timer),this.$window.off("scroll.singlePageNav"),this.didScroll=!1},checkPosition:function(){var scrollPos=this.$window.scrollTop(),currentSection=this.getCurrentSection(scrollPos);null!==currentSection&&this.setActiveLink(currentSection)},getCoords:function($elem){return{top:Math.round($elem.offset().top)-this.options.offset}},setActiveLink:function(href){var $activeLink=this.$container.find("a[href$='"+href+"']");$activeLink.hasClass(this.options.currentClass)||(this.$links.removeClass(this.options.currentClass),$activeLink.addClass(this.options.currentClass))},getCurrentSection:function(scrollPos){var i,hash,section;for(i=0;i<this.$links.length;i++)hash=this.$links[i].hash,$(hash).length&&scrollPos>=this.getCoords($(hash)).top-this.options.threshold&&(section=hash);if(scrollPos==$(document).height()-$(window).height()){var numberOfLinks=this.$links.length;numberOfLinks>0&&(section=this.$links[numberOfLinks-1].hash)}return section||(0===this.$links.length?null:this.$links[0].hash)}};$.fn.singlePageNav=function(options){return this.each(function(){Object.create(SinglePageNav).init(options,this)})},$.fn.singlePageNav.defaults={offset:0,threshold:120,speed:400,currentClass:"current",easing:"swing",updateHash:!1,filter:"",onComplete:!1,beforeStart:!1}}(jQuery,window,document);